# Samba/سمبا

## محتویات درس

در روزهای اول پردازش اطلاعات، لازم بود که دستگاه‌های ویندوزی بتوانند با دستگاه‌های لینوکسی فایل به اشتراک بگذارند. به همین خاطر پروتکل Server Message Block (SMB) متولد شد. SMB برای به اشتراک گذاشتن فایل‌ها بین سیستم‌عامل‌های ویندوزی (و همینطور مک) مورد استفاده قرار می‌گرفت و بعدها با بهبودهایی که پیدا کرد به پروتکل فایل‌سیستم مشترک شبکه‌ی جهانی (CIFS) تبدیل شد.

سمبا/Samba ابزارهای لینوکسی برای کار با CIFS در لینوکس است. علاوه بر به اشتراک گذاری فایل‌ها می‌توانید منابعی مثل پرینتر را نیز توسط آن به اشتراک بگذارید.

**ساخت یک شبکه اشتراک گذاری با سمبا**

با هم به ساخت یک شبکه‌ی به اشتراک گذاری می‌سازیم که سیستم ویندوزی هم قادر به دسترسی به آن باشد:

**نصب سمبا**

```
$ sudo apt update
$ sudo apt install samba
```

**Setup smb.conf**

فایل پیکربندی برای Samba در مسیر /etc/samba/smb.conf در دسترس است. این فایل به سیستم می‌گوید که چه دایرکتوری‌هایی بایستی به اشتراک گذاشته شوند. همچنین مجوز‌های دسترسی و دیگر گزینه‌ها هم توسط این فایل قابل پیکربندی‌ست. فایل پیش‌فرض smb.conf با خطوط بسیار زیادی که به اصلاح کامنت شده‌اند همراه است. خطوط کامنت شده توسط توسعه دهنده در فایل پیکربندی قرار داده می‌شود ولی غیرفعال‌ند تا زمانی که خود کاربر بنا به نیاز آن را به اصلاح از حالت کامنت خارج کند (آن‌کامنت کند).

```$ sudo vi /etc/samba/smb.conf```

**تعیین یک رمز عبور برای سمبا**

```$ sudo smbpasswd -a [username]```

**ساخت یک دایرکتوری برای به اشتراک‌گذاشتن**

```$ mkdir /my/directory/to/share```

**شروع‌مجدد سرویس سمبا**


```$ sudo service smbd restart```

**دسترسی به سمبا توسط ویندوز**

در ویندوز، در قسمت Run اسم دایرکتوری به اشتراک‌گذاشته شده را بنویسید:

```\\HOST\sharename```

**دسترسی به سمبا/ویندوز از طریق لینوکس**

```$ smbclient //HOST/directory -U user```

بسته‌ی سمبا شامل یک ابزار خط فرمانی به اسم smbclient می‌شود که توسط آن می‌تواند به هر سیستم ویندوزی یا سرور سمبا متصل شوید. زمانی که به سیستم اشتراک‌گذارنده متصل شدید، می‌توانید بین فایل‌ها بگردید و فایل‌ها را نقل و انتقال دهید.

**اتصال یک فایل سیستم اشتراک‌گذاشته‌شده سمبا به سیستم‌تان**

به جای رد و بدل کردن فایل‌ها بین سیستم خودتان و سیستمی که فایل‌ها را به اشتراک می‌گذارد می‌توانید که فایل‌سیستم به اشتراک‌گذاشته شده را را بر روی سیستم خود سوار کنید.

```$ sudo mount -t cifs servername:directory mountpount -o user=username,pass=password```

## تمرین

یک اشتراک سمبا ایجاد کنید (البته اگر از قبل ندارید) سپس فایل smb.conf را باز کرده و کمی خودتان را به گزینه‌های موجود در فایل آشنا کنید.

## سوال آزمون

آخرین پروتکل برای رد و بدل کردن فایل‌ها بین سیستم‌های ویندوزی و لینوکسی چیست؟

## پاسخ آزمون

CIFS
